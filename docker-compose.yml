services:
  constellation:
    image: ${DOCKER_REGISTRY:-ghcr.io}/enan456/constellation:${VERSION:-latest}
    build:
      context: .
      labels:
        - "org.opencontainers.image.title=Constellation"
        - "org.opencontainers.image.description=Visual infrastructure topology dashboard"
        - "org.opencontainers.image.version=${VERSION:-1.0.0}"
        - "org.opencontainers.image.source=https://github.com/Enan456/constellation"
    container_name: constellation
    restart: unless-stopped
    ports:
      - "${PORT:-3000}:3000"
    volumes:
      - ./data:/app/data
    environment:
      - NODE_ENV=${NODE_ENV:-production}
      - DATA_PATH=${DATA_PATH:-/app/data/infrastructure.json}
      - APP_TITLE=${APP_TITLE:-Constellation}
